<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Animated bar chart | Women’s and Minorities’ Working Opportunities in New York City from 1850 to 1940</title>
  <meta name="description" content="Chapter 6 Animated bar chart | Women’s and Minorities’ Working Opportunities in New York City from 1850 to 1940" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Animated bar chart | Women’s and Minorities’ Working Opportunities in New York City from 1850 to 1940" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Animated bar chart | Women’s and Minorities’ Working Opportunities in New York City from 1850 to 1940" />
  
  
  

<meta name="author" content="Luwei Zhang, Guangyu Wu, Jingxiang Zhang" />


<meta name="date" content="2021-12-13" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="results.html"/>
<link rel="next" href="conclusion-1.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">NYC-Minority-Working-Conditions</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="data-sources.html"><a href="data-sources.html"><i class="fa fa-check"></i><b>2</b> Data Sources</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data-sources.html"><a href="data-sources.html#introduction-of-data-source"><i class="fa fa-check"></i><b>2.1</b> Introduction of Data Source</a></li>
<li class="chapter" data-level="2.2" data-path="data-sources.html"><a href="data-sources.html#data-generation-process"><i class="fa fa-check"></i><b>2.2</b> Data Generation Process</a></li>
<li class="chapter" data-level="2.3" data-path="data-sources.html"><a href="data-sources.html#data-extraction-workflow"><i class="fa fa-check"></i><b>2.3</b> Data Extraction Workflow</a></li>
<li class="chapter" data-level="2.4" data-path="data-sources.html"><a href="data-sources.html#choice-of-variables"><i class="fa fa-check"></i><b>2.4</b> Choice of Variables</a></li>
<li class="chapter" data-level="2.5" data-path="data-sources.html"><a href="data-sources.html#issues-with-the-data"><i class="fa fa-check"></i><b>2.5</b> Issues with the Data</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>3</b> Data Transformation</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-transformation.html"><a href="data-transformation.html#import-packages-and-dataset"><i class="fa fa-check"></i><b>3.1</b> Import Packages and Dataset</a></li>
<li class="chapter" data-level="3.2" data-path="data-transformation.html"><a href="data-transformation.html#reduce-cardinality-and-decode-data"><i class="fa fa-check"></i><b>3.2</b> Reduce Cardinality and Decode Data</a></li>
<li class="chapter" data-level="3.3" data-path="data-transformation.html"><a href="data-transformation.html#handling-na-special-cases-and-enforce-data-types"><i class="fa fa-check"></i><b>3.3</b> Handling N/A, Special Cases and Enforce Data Types</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="missing-values.html"><a href="missing-values.html"><i class="fa fa-check"></i><b>4</b> Missing Values</a></li>
<li class="chapter" data-level="5" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>5</b> Results</a>
<ul>
<li class="chapter" data-level="5.1" data-path="results.html"><a href="results.html#working-conditions"><i class="fa fa-check"></i><b>5.1</b> Working Conditions</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="results.html"><a href="results.html#gender-and-employment"><i class="fa fa-check"></i><b>5.1.1</b> Gender and Employment</a></li>
<li class="chapter" data-level="5.1.2" data-path="results.html"><a href="results.html#race-and-employment"><i class="fa fa-check"></i><b>5.1.2</b> Race and Employment</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="results.html"><a href="results.html#education-and-employment"><i class="fa fa-check"></i><b>5.2</b> Education and Employment</a></li>
<li class="chapter" data-level="5.3" data-path="results.html"><a href="results.html#time-series-and-employment"><i class="fa fa-check"></i><b>5.3</b> Time series and Employment</a></li>
<li class="chapter" data-level="5.4" data-path="results.html"><a href="results.html#conclusion"><i class="fa fa-check"></i><b>5.4</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="animated-bar-chart.html"><a href="animated-bar-chart.html"><i class="fa fa-check"></i><b>6</b> Animated bar chart</a></li>
<li class="chapter" data-level="7" data-path="conclusion-1.html"><a href="conclusion-1.html"><i class="fa fa-check"></i><b>7</b> Conclusion</a>
<ul>
<li class="chapter" data-level="7.1" data-path="conclusion-1.html"><a href="conclusion-1.html#summary"><i class="fa fa-check"></i><b>7.1</b> Summary</a></li>
<li class="chapter" data-level="7.2" data-path="conclusion-1.html"><a href="conclusion-1.html#suggestion"><i class="fa fa-check"></i><b>7.2</b> Suggestion</a></li>
<li class="chapter" data-level="7.3" data-path="conclusion-1.html"><a href="conclusion-1.html#look-forward"><i class="fa fa-check"></i><b>7.3</b> Look Forward</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Women’s and Minorities’ Working Opportunities in New York City from 1850 to 1940</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="animated-bar-chart" class="section level1" number="6">
<h1><span class="header-section-number">Chapter 6</span> Animated bar chart</h1>
<p>In this chapter, we plot an animated graph to show how labor force for each gender has changed over the years (from 1860 to 1940). Since the text cannot be used in transition in D3, we placed a vertical axis on the left of the bar chart with years. An orange ball keeps moving along the axis to indicate which year’s statistics the graph is showing. To make the change in the bar chart more obvious, we alternatively change the filling color of the bars between blue and green every time the year changes.</p>
<pre><code>## # A tibble: 35 × 5
## # Groups:   YEAR, SEX [18]
##     YEAR SEX    LABFORCE                       n bar_height
##    &lt;int&gt; &lt;chr&gt;  &lt;chr&gt;                      &lt;int&gt;      &lt;dbl&gt;
##  1  1850 Female &lt;NA&gt;                        1786      25.5 
##  2  1850 Male   No, not in the labor force   182       2.6 
##  3  1850 Male   Yes, in the labor force     1556      22.2 
##  4  1860 Female No, not in the labor force  2577      36.8 
##  5  1860 Female Yes, in the labor force      752      10.7 
##  6  1860 Male   No, not in the labor force   265       3.79
##  7  1860 Male   Yes, in the labor force     2806      40.1 
##  8  1870 Female No, not in the labor force  3036      43.4 
##  9  1870 Female Yes, in the labor force      957      13.7 
## 10  1870 Male   No, not in the labor force   230       3.29
## # … with 25 more rows</code></pre>
<p>Conclusions:</p>
<ul>
<li>Most of the male are in the labor force, and the percentage remains relatively unchanged throughout the whole time.</li>
<li>Since 1860, the percentage of women in the labor force has been increaasing till the end of the time included (1940).</li>
<li>However, by the time of 1940, more than half of the women still remained out of the labor force, yet the difference between women not in labor force and women in labor force has decreased significantly compared to 1860.</li>
</ul>
<script src="https://d3js.org/d3.v7.js"></script>
<script>
// Create svg and initial bars

      var w = 1000;
      var h = 350;
      var margin = {
        top: 25,
        right: 100,
        bottom: 75,
        left: 600,
      };
      var innerWidth = w - margin.left - margin.right;
      var innerHeight = h - margin.top - margin.bottom;

      var bardata = [
        { category: 'Female_No', value: 36.8 },
        { category: 'Female_Yes', value: 10.7 },
        { category: 'Male_No', value: 3.8 },
        { category: 'Male_Yes', value: 40.1 },
      ];

      var xScale = d3
        .scaleBand()
        .domain(bardata.map((d) => d.category))
        .range([0, innerWidth])
        .paddingInner(0.1);

      var yScale = d3
        .scaleLinear()
        .domain([0, d3.max(bardata.map((d) => d.value))])
        .range([innerHeight, 0]);

      var xAxis = d3.axisBottom().scale(xScale);


      // add svg

      var svg = d3
        .select('body')
        .append('svg')
        .attr('width', w)
        .attr('height', h);

      // add background rectangle

      svg
        .append('rect')
        .attr('x', 500)
        .attr('y', 0)
        .attr('width', w)
        .attr('height', h)
        .attr('fill', 'aliceblue');

      // add bars as a group

      var bars = svg
        .append('g')
        .attr('id', 'plot')
        .attr(
          'transform',
          `translate (${margin.left}, ${margin.top})`
        )
        .selectAll('rect')
        .data(bardata);

      bars
        .enter()
        .append('rect')
        .attr('x', (d) => xScale(d.category))
        .attr('y', (d) => yScale(d.value))
        .attr('width', xScale.bandwidth())
        .attr(
          'height',
          (d) => innerHeight - yScale(d.value)
        )
        .attr('fill', 'cornflowerblue');

      // add axes

      svg
        .append('g')
        .attr('class', 'xAxis')
        .attr(
          'transform',
          `translate (${margin.left}, ${h - margin.bottom})`
        )
        .call(xAxis);


      
      
      
      
  var bardata_2 = [
        { category: 'Female_No', value: 43.4 },
        { category: 'Female_Yes', value: 13.7 },
        { category: 'Male_No', value: 3.3 },
        { category: 'Male_Yes', value: 47.7 },
      ];
    var bars = svg.select('g').selectAll("rect").data(bardata_2);
    
      
var yScale = d3
        .scaleLinear()
        .domain([0, d3.max(bardata_2.map((d) => d.value))])
        .range([innerHeight, 0]);
      
bars.transition()
  .duration(2000)
  .attr('y', (d) => yScale(d.value))
  .attr('x', (d) => xScale(d.category))
  .attr('height',
          (d) => innerHeight - yScale(d.value)
        ).attr('fill', 'forestgreen');  
      
      
      
      
      
      
      var bardata_3 = [
        { category: 'Female_No', value: 57 },
        { category: 'Female_Yes', value: 21.9 },
        { category: 'Male_No', value: 3.7 },
        { category: 'Male_Yes', value: 70.5 },
      ];
    var bars = svg.select('g').selectAll("rect").data(bardata_3);
    
      
var yScale = d3
        .scaleLinear()
        .domain([0, d3.max(bardata_3.map((d) => d.value))])
        .range([innerHeight, 0]);
      
bars.transition().delay(2000)
  .duration(2000)
  .attr('y', (d) => yScale(d.value))
  .attr('x', (d) => xScale(d.category))
  .attr('height',
          (d) => innerHeight - yScale(d.value)
        ).attr('fill', 'cornflowerblue'); 
      

      
      var bardata_4 = [
        { category: 'Female_No', value: 108.4 },
        { category: 'Female_Yes', value: 42.3 },
        { category: 'Male_No', value: 9.2 },
        { category: 'Male_Yes', value: 136.3 },
      ];
    var bars = svg.select('g').selectAll("rect").data(bardata_4);
    
      
var yScale = d3
        .scaleLinear()
        .domain([0, d3.max(bardata_4.map((d) => d.value))])
        .range([innerHeight, 0]);
      
bars.transition().delay(4000)
  .duration(2000)
  .attr('y', (d) => yScale(d.value))
  .attr('x', (d) => xScale(d.category))
  .attr('height',
          (d) => innerHeight - yScale(d.value)
        ).attr('fill', 'forestgreen'); 
      
  
      var bardata_5 = [
        { category: 'Female_No', value: 139.8 },
        { category: 'Female_Yes', value: 68.9 },
        { category: 'Male_No', value: 10 },
        { category: 'Male_Yes', value: 199.2 },
      ];
    var bars = svg.select('g').selectAll("rect").data(bardata_5);
    
      
var yScale = d3
        .scaleLinear()
        .domain([0, d3.max(bardata_5.map((d) => d.value))])
        .range([innerHeight, 0]);
      
bars.transition().delay(6000)
  .duration(2000)
  .attr('y', (d) => yScale(d.value))
  .attr('x', (d) => xScale(d.category))
  .attr('height',
          (d) => innerHeight - yScale(d.value)
        ).attr('fill', 'cornflowerblue'); 
      
      
      
      var bardata_6 = [
        { category: 'Female_No', value: 168.7 },
        { category: 'Female_Yes', value: 87 },
        { category: 'Male_No', value: 13.7 },
        { category: 'Male_Yes', value: 239.2 },
      ];
    var bars = svg.select('g').selectAll("rect").data(bardata_6);
    
      
var yScale = d3
        .scaleLinear()
        .domain([0, d3.max(bardata_6.map((d) => d.value))])
        .range([innerHeight, 0]);
      
bars.transition().delay(8000)
  .duration(2000)
  .attr('y', (d) => yScale(d.value))
  .attr('x', (d) => xScale(d.category))
  .attr('height',
          (d) => innerHeight - yScale(d.value)
        ).attr('fill', 'forestgreen'); 
      
      
      var bardata_7 = [
        { category: 'Female_No', value: 221.4 },
        { category: 'Female_Yes', value: 110.3 },
        { category: 'Male_No', value: 22.8 },
        { category: 'Male_Yes', value: 311.6 },
      ];
    var bars = svg.select('g').selectAll("rect").data(bardata_7);
    
      
var yScale = d3
        .scaleLinear()
        .domain([0, d3.max(bardata_7.map((d) => d.value))])
        .range([innerHeight, 0]);
      
bars.transition().delay(10000)
  .duration(2000)
  .attr('y', (d) => yScale(d.value))
  .attr('x', (d) => xScale(d.category))
  .attr('height',
          (d) => innerHeight - yScale(d.value)
        ).attr('fill', 'cornflowerblue'); 
      
      var bardata_8 = [
        { category: 'Female_No', value: 265 },
        { category: 'Female_Yes', value: 160.4 },
        { category: 'Male_No', value: 35.4 },
        { category: 'Male_Yes', value: 377.2 },
      ];
    var bars = svg.select('g').selectAll("rect").data(bardata_8);
    
      
var yScale = d3
        .scaleLinear()
        .domain([0, d3.max(bardata_8.map((d) => d.value))])
        .range([innerHeight, 0]);
      
bars.transition().delay(12000)
  .duration(2000)
  .attr('y', (d) => yScale(d.value))
  .attr('x', (d) => xScale(d.category))
  .attr('height',
          (d) => innerHeight - yScale(d.value)
        ).attr('fill', 'forestgreen'); 
      
    svg.append("circle").attr("cx", "567").attr("cy", "275").attr("r", "8")
  .attr("fill", "orange");
      my_circle = svg.select('circle')
      my_circle.transition().delay(0)
  .duration(2000).attr('cy',245)
      my_circle.transition().delay(2000)
  .duration(2000).attr('cy',213)
      my_circle.transition().delay(4000)
  .duration(2000).attr('cy',144)
      my_circle.transition().delay(6000)
  .duration(2000).attr('cy',110)
      my_circle.transition().delay(8000)
  .duration(2000).attr('cy',76)
      my_circle.transition().delay(10000)
  .duration(2000).attr('cy',43)
      my_circle.transition().delay(12000)
  .duration(2000).attr('cy',10)
      
      var width = 400, height = 400;

    var data_axis = [1860, 1870, 1880, 1900, 1910, 1920, 1930, 1940];

    var scale = d3.scaleLinear()
                  .domain([d3.min(data_axis), d3.max(data_axis)])
                  .range([270, 0]);

    var y_axis = d3.axisLeft()
                  .scale(scale);

    svg.append("g")
       .attr("transform", "translate(550, 10)")
       .call(y_axis);
      
    svg.append('text').text('Labor Force by genders across the years').attr('x',630).attr('y',325)
</script>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="results.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="conclusion-1.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/EDAV-final-project-group23/EDAV-Final-Group23/edit/main/06-interactive.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/EDAV-final-project-group23/EDAV-Final-Group23/blob/main/06-interactive.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
